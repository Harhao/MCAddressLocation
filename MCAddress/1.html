<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>热力图</title>
    <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <script src="http://webapi.amap.com/maps?v=1.4.1&key=dbb8674fa010e19967c927bdcc7ff3a6"></script>
    <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
    <!-- <script type="text/javascript" src="http://a.amap.com/jsapi_demos/static/resource/heatmapData.js"></script> -->
</head>
<body>
<div id="container"></div>
<div class="button-group">
    <input type="button" class="button" value="显示热力图" onclick="heatmap.show()"/>
    <input type="button" class="button" value="关闭热力图" onclick="heatmap.hide()"/>
</div>
<script>
    var map = new AMap.Map("container", {
        resizeEnable: true,
        center: [116.42, 39.92],
        zoom: 11
    });
    if (!isSupportCanvas()) {
        alert('热力图仅对支持canvas的浏览器适用,您所使用的浏览器不能使用热力图功能,请换个浏览器试试~')
    }
    //详细的参数,可以查看heatmap.js的文档 http://www.patrick-wied.at/static/heatmapjs/docs.html
    //参数说明如下:
    /* visible 热力图是否显示,默认为true
     * opacity 热力图的透明度,分别对应heatmap.js的minOpacity和maxOpacity
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
     .2:'rgb(0, 255, 255)',
     .5:'rgb(0, 110, 255)',
     .8:'rgb(100, 0, 255)'
     }
     其中 key 表示插值的位置, 0-1 
     value 为颜色值 
     */
    var heatmap;
    var heatmapData=[{"lng": "113.344297", "lat": "23.116909", "count": 10}, {"lng": "113.255285", "lat": "23.147045", "count": 15}, {"lng": "113.324768", "lat": "23.126375", "count": 85}, {"lng": "113.247621", "lat": "23.122046", "count": 45}, {"lng": "113.263076", "lat": "23.156531", "count": 13}, {"lng": "113.297863", "lat": "23.090452", "count": 19}, {"lng": "113.367010", "lat": "22.936023", "count": 18}, {"lng": "113.614086", "lat": "23.124250", "count": 21}, {"lng": "113.463881", "lat": "23.613052", "count": 76}, {"lng": "113.462326", "lat": "23.612083", "count": 89}, {"lng": "113.322292", "lat": "23.120381", "count": 54}, {"lng": "113.238650", "lat": "23.125353", "count": 84}, {"lng": "113.260708", "lat": "23.149971", "count": 15}, {"lng": "113.289709", "lat": "23.091962", "count": 24}, {"lng": "113.263049", "lat": "23.101094", "count": 81}, {"lng": "113.335138", "lat": "23.142531", "count": 51}, {"lng": "113.277035", "lat": "23.070905", "count": 33}, {"lng": "113.294000", "lat": "23.120102", "count": 15}, {"lng": "113.301446", "lat": "23.043065", "count": 61}, {"lng": "113.365000", "lat": "22.941261", "count": 88}, {"lng": "113.260387", "lat": "23.194563", "count": 34}, {"lng": "113.242210", "lat": "23.191883", "count": 41}, {"lng": "113.339796", "lat": "23.135607", "count": 95}, {"lng": "113.446537", "lat": "23.103905", "count": 84}, {"lng": "113.299427", "lat": "23.064038", "count": 31}, {"lng": "113.541337", "lat": "23.096091", "count": 14}, {"lng": "113.322692", "lat": "23.149840", "count": 92}, {"lng": "113.273030", "lat": "23.101772", "count": 60}, {"lng": "113.180350", "lat": "23.452620", "count": 74}, {"lng": "113.314475", "lat": "22.978454", "count": 70}, {"lng": "113.249971", "lat": "23.142759", "count": 40}, {"lng": "113.389060", "lat": "23.004890", "count": 45}, {"lng": "113.553596", "lat": "23.114428", "count": 81}, {"lng": "113.244756", "lat": "23.131369", "count": 29}, {"lng": "113.284835", "lat": "23.134113", "count": 81}, {"lng": "113.456622", "lat": "23.100665", "count": 43}, {"lng": "113.255386", "lat": "23.157249", "count": 0}, {"lng": "113.325652", "lat": "23.185250", "count": 6}, {"lng": "113.232974", "lat": "23.275054", "count": 86}, {"lng": "113.273070", "lat": "23.229213", "count": 44}, {"lng": "113.372490", "lat": "23.052779", "count": 73}, {"lng": "113.528098", "lat": "23.086268", "count": 86}, {"lng": "113.330781", "lat": "23.025865", "count": 62}, {"lng": "113.300196", "lat": "23.171500", "count": 58}, {"lng": "109.606452", "lat": "27.947055", "count": 19}, {"lng": "113.325165", "lat": "23.133959", "count": 59}, {"lng": "113.248546", "lat": "23.114424", "count": 96}, {"lng": "113.269608", "lat": "23.120831", "count": 92}, {"lng": "113.543056", "lat": "23.109077", "count": 99}, {"lng": "113.269122", "lat": "23.124103", "count": 14}, {"lng": "113.316452", "lat": "23.024521", "count": 85}, {"lng": "113.209898", "lat": "23.375453", "count": 98}, {"lng": "113.447811", "lat": "23.104494", "count": 60}, {"lng": "113.297352", "lat": "23.088238", "count": 62}, {"lng": "113.282220", "lat": "23.138507", "count": 44}, {"lng": "113.318244", "lat": "23.118890", "count": 6}, {"lng": "113.269462", "lat": "22.988878", "count": 4}, {"lng": "113.262418", "lat": "23.192340", "count": 86}, {"lng": "113.308671", "lat": "23.100649", "count": 49}, {"lng": "113.384129", "lat": "22.937244", "count": 78}, {"lng": "113.250547", "lat": "23.154104", "count": 42}, {"lng": "113.349391", "lat": "22.998085", "count": 58}, {"lng": "113.300834", "lat": "22.965850", "count": 86}, {"lng": "113.282794", "lat": "23.126180", "count": 26}, {"lng": "113.294419", "lat": "23.070674", "count": 2}, {"lng": "113.269789", "lat": "23.085739", "count": 66}, {"lng": "113.251090", "lat": "23.148003", "count": 86}, {"lng": "113.363768", "lat": "23.095991", "count": 87}, {"lng": "113.360270", "lat": "22.924257", "count": 63}, {"lng": "113.283977", "lat": "23.212607", "count": 26}, {"lng": "113.303867", "lat": "23.220382", "count": 24}, {"lng": "113.235703", "lat": "23.098592", "count": 6}, {"lng": "113.316440", "lat": "23.089563", "count": 21}, {"lng": "113.366321", "lat": "22.939357", "count": 71}, {"lng": "113.343282", "lat": "23.126684", "count": 12}, {"lng": "113.254382", "lat": "23.157436", "count": 31}, {"lng": "113.334583", "lat": "23.094546", "count": 9}, {"lng": "113.299222", "lat": "23.129942", "count": 3}, {"lng": "113.588847", "lat": "23.547775", "count": 77}, {"lng": "113.615563", "lat": "23.117119", "count": 59}, {"lng": "113.235524", "lat": "23.125298", "count": 49}, {"lng": "113.552734", "lat": "22.801449", "count": 16}, {"lng": "113.270966", "lat": "23.094982", "count": 76}, {"lng": "113.302051", "lat": "23.082745", "count": 71}, {"lng": "113.624833", "lat": "23.121417", "count": 85}, {"lng": "113.283346", "lat": "23.116699", "count": 7}, {"lng": "113.309540", "lat": "23.134975", "count": 72}, {"lng": "113.370909", "lat": "22.927382", "count": 34}, {"lng": "113.308460", "lat": "23.024682", "count": 36}, {"lng": "113.217662", "lat": "23.400648", "count": 13}, {"lng": "113.256276", "lat": "23.205627", "count": 12}, {"lng": "113.347872", "lat": "23.169934", "count": 40}, {"lng": "113.392160", "lat": "23.061045", "count": 52}, {"lng": "113.268618", "lat": "23.123680", "count": 73}, {"lng": "113.253156", "lat": "23.119536", "count": 18}, {"lng": "113.283573", "lat": "23.126606", "count": 45}, {"lng": "113.286083", "lat": "23.125144", "count": 96}, {"lng": "113.368509", "lat": "23.193679", "count": 98}, {"lng": "113.323131", "lat": "23.150875", "count": 31}, {"lng": "113.284489", "lat": "23.123461", "count": 67}, {"lng": "113.398191", "lat": "22.940600", "count": 47}, {"lng": "113.235296", "lat": "23.155994", "count": 38}, {"lng": "113.234615", "lat": "23.093300", "count": 38}, {"lng": "113.210399", "lat": "23.382780", "count": 22}, {"lng": "113.352892", "lat": "23.152066", "count": 5}, {"lng": "113.258944", "lat": "23.147074", "count": 54}, {"lng": "113.831132", "lat": "23.287869", "count": 82}, {"lng": "113.327030", "lat": "23.132175", "count": 41}, {"lng": "113.241514", "lat": "23.113359", "count": 56}, {"lng": "113.271012", "lat": "22.992079", "count": 66}, {"lng": "113.272194", "lat": "22.992170", "count": 40}, {"lng": "113.257335", "lat": "23.132882", "count": 81}, {"lng": "113.329101", "lat": "23.133815", "count": 53}, {"lng": "113.320880", "lat": "23.140285", "count": 6}, {"lng": "113.333884", "lat": "23.150294", "count": 49}, {"lng": "113.321919", "lat": "23.181423", "count": 53}, {"lng": "113.324509", "lat": "23.149567", "count": 35}, {"lng": "113.258459", "lat": "23.140391", "count": 54}, {"lng": "113.815286", "lat": "23.276029", "count": 26}, {"lng": "113.215031", "lat": "23.389067", "count": 87}, {"lng": "113.332296", "lat": "23.117923", "count": 83}, {"lng": "113.488165", "lat": "22.955235", "count": 1}, {"lng": "113.401881", "lat": "23.117567", "count": 30}, {"lng": "113.306606", "lat": "23.389744", "count": 81}, {"lng": "113.311409", "lat": "23.118796", "count": 1}, {"lng": "113.275931", "lat": "23.090655", "count": 35}, {"lng": "113.271369", "lat": "23.126377", "count": 93}, {"lng": "113.247865", "lat": "23.114291", "count": 27}, {"lng": "113.256215", "lat": "23.125588", "count": 2}, {"lng": "113.256408", "lat": "23.146402", "count": 55}, {"lng": "113.583451", "lat": "23.158577", "count": 69}, {"lng": "113.411370", "lat": "22.938276", "count": 5}, {"lng": "113.250678", "lat": "23.179862", "count": 16}, {"lng": "113.321493", "lat": "23.095726", "count": 40}, {"lng": "113.317800", "lat": "22.968926", "count": 80}, {"lng": "113.278617", "lat": "23.085906", "count": 64}, {"lng": "113.276507", "lat": "23.139743", "count": 95}, {"lng": "113.320869", "lat": "23.129781", "count": 14}, {"lng": "113.366447", "lat": "22.942831", "count": 85}, {"lng": "113.268041", "lat": "23.123271", "count": 20}, {"lng": "113.227183", "lat": "23.336593", "count": 67}, {"lng": "113.309608", "lat": "23.038149", "count": 45}, {"lng": "113.254532", "lat": "23.111647", "count": 59}, {"lng": "113.268608", "lat": "23.161141", "count": 78}, {"lng": "113.255292", "lat": "23.148573", "count": 19}, {"lng": "113.344294", "lat": "23.139680", "count": 36}, {"lng": "113.229607", "lat": "23.077701", "count": 57}, {"lng": "113.380320", "lat": "23.169490", "count": 50}, {"lng": "113.366976", "lat": "23.122129", "count": 33}, {"lng": "113.360126", "lat": "22.942308", "count": 9}, {"lng": "113.231365", "lat": "23.396937", "count": 22}, {"lng": "113.380121", "lat": "23.126316", "count": 52}, {"lng": "113.366422", "lat": "23.097340", "count": 65}, {"lng": "113.248850", "lat": "23.149828", "count": 66}, {"lng": "113.155865", "lat": "23.461858", "count": 21}, {"lng": "113.264872", "lat": "23.115949", "count": 64}, {"lng": "113.270800", "lat": "23.106228", "count": 25}, {"lng": "113.833711", "lat": "23.291508", "count": 72}, {"lng": "113.329352", "lat": "23.126755", "count": 4}, {"lng": "113.366374", "lat": "23.193615", "count": 28}, {"lng": "118.593178", "lat": "24.779516", "count": 12}, {"lng": "113.360699", "lat": "22.960386", "count": 47}, {"lng": "113.345624", "lat": "22.919752", "count": 36}, {"lng": "113.271486", "lat": "23.135351", "count": 85}, {"lng": "113.324870", "lat": "23.117240", "count": 5}, {"lng": "113.323427", "lat": "23.141790", "count": 87}, {"lng": "113.241537", "lat": "23.141126", "count": 64}, {"lng": "113.362274", "lat": "23.102131", "count": 52}, {"lng": "113.295731", "lat": "23.334532", "count": 47}, {"lng": "113.222511", "lat": "23.149323", "count": 28}, {"lng": "113.818710", "lat": "23.284146", "count": 21}, {"lng": "113.235123", "lat": "23.079684", "count": 84}, {"lng": "113.269272", "lat": "23.160980", "count": 93}, {"lng": "113.526406", "lat": "23.064399", "count": 0}, {"lng": "113.343282", "lat": "23.135565", "count": 53}, {"lng": "113.258579", "lat": "23.140074", "count": 13}, {"lng": "113.360977", "lat": "23.118423", "count": 21}, {"lng": "113.328452", "lat": "23.161193", "count": 97}, {"lng": "113.264268", "lat": "23.153607", "count": 24}, {"lng": "113.301787", "lat": "23.142534", "count": 92}, {"lng": "113.248687", "lat": "23.147135", "count": 44}, {"lng": "113.266339", "lat": "23.092767", "count": 39}, {"lng": "113.338505", "lat": "23.133761", "count": 65}, {"lng": "113.310500", "lat": "23.151311", "count": 38}, {"lng": "113.263700", "lat": "23.125793", "count": 3}, {"lng": "113.296589", "lat": "23.069412", "count": 11}, {"lng": "113.303936", "lat": "23.386881", "count": 54}, {"lng": "113.317908", "lat": "23.123600", "count": 92}, {"lng": "113.241407", "lat": "23.118272", "count": 28}, {"lng": "113.255012", "lat": "23.161287", "count": 17}, {"lng": "113.209108", "lat": "23.377696", "count": 48}, {"lng": "113.261903", "lat": "23.113833", "count": 83}, {"lng": "113.247178", "lat": "23.126325", "count": 14}, {"lng": "113.327030", "lat": "23.132175", "count": 55}, {"lng": "113.328126", "lat": "23.143379", "count": 82}, {"lng": "113.603260", "lat": "23.127827", "count": 62}, {"lng": "113.409831", "lat": "23.124441", "count": 75}, {"lng": "113.506830", "lat": "23.155410", "count": 26}, {"lng": "113.349340", "lat": "23.007035", "count": 44}, {"lng": "113.204213", "lat": "23.386709", "count": 10}, {"lng": "113.228411", "lat": "23.089877", "count": 73}, {"lng": "113.454664", "lat": "22.884362", "count": 11}, {"lng": "113.357739", "lat": "23.292417", "count": 89}, {"lng": "113.589801", "lat": "23.532832", "count": 40}];
    map.plugin(["AMap.Heatmap"], function() {
        //初始化heatmap对象
        heatmap = new AMap.Heatmap(map, {
            radius: 25, //给定半径
            opacity: [0, 0.8]
            /*,gradient:{
             0.5: 'blue',
             0.65: 'rgb(117,211,248)',
             0.7: 'rgb(0, 255, 0)',
             0.9: '#ffea00',
             1.0: 'red'
             }*/
        });
        //设置数据集：该数据为北京部分“公园”数据
        heatmap.setDataSet({
            data: heatmapData,
            max: 100
        });
    });
    //判断浏览区是否支持canvas
    function isSupportCanvas() {
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>
</body>
</html>